#!/bin/bash

case "$1" in
  start)
    echo "stopping services..."
    killall redshift || true
    dunstctl set-paused true
    echo "disabling cronjobs..."
    crontab -l > ~/.cronbackup && crontab -r
    ;;
  stop)
    echo "restarting services..."
    redshift </dev/null &>/dev/null &
    dunstctl set-paused false
    xautolock -time 3 -corners ---- -cornersize 40 -locker "/usr/bin/pactl set-sink-mute 0 1; systemctl suspend" -detectsleep -notify 25 -notifier "notify-send --urgency=critical -t 5000 'suspending in 20s'" &
    echo "sudo for re-installing crontab..."
    cat ~/.cronbackup
    sudo mv ~/.cronbackup /var/spool/cron/nils
    echo -e "\n\tMOVED\n"
    crontab -l
    echo "please check the crontab!"
    ;;
esac
